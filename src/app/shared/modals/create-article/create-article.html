<h2 mat-dialog-title>{{ data.title || 'Crear juego' }}</h2>

<div class="modal-content">
  <form [formGroup]="form">

    <!-- Título -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Título</mat-label>
      <input matInput formControlName="title" />
      <mat-error *ngIf="form.controls['title'].touched && form.controls['title'].invalid">
        Obligatorio
      </mat-error>
    </mat-form-field>

    <!-- Categoría -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Categoría</mat-label>
      <mat-select formControlName="categoryId">
        <mat-option *ngFor="let c of data.categories" [value]="c.id">
          {{ c.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.controls['categoryId'].touched && form.controls['categoryId'].invalid">
        Obligatorio
      </mat-error>
    </mat-form-field>


        <!-- Categoría -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Usuario</mat-label>
      <mat-select formControlName="ownerId">
        <mat-option *ngFor="let c of data.users" [value]="c.id">
          {{ c.email }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.controls['ownerId'].touched && form.controls['ownerId'].invalid">
        Obligatorio
      </mat-error>
    </mat-form-field>


            <!-- Status -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Status</mat-label>
      <mat-select formControlName="statusId">
        <mat-option *ngFor="let c of data.statuses" [value]="c.id">
          {{ c.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="form.controls['statusId'].touched && form.controls['statusId'].invalid">
        Obligatorio
      </mat-error>
    </mat-form-field>

    <!-- Código -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Código interno</mat-label>
      <input matInput formControlName="code" />
      <mat-error *ngIf="form.controls['code'].touched && form.controls['code'].invalid">
        Obligatorio
      </mat-error>
    </mat-form-field>

    <!-- Jugadores -->
    <div class="two-columns">
      <mat-form-field appearance="outline" class="half">
        <mat-label>Mín. jugadores</mat-label>
        <input matInput type="number" formControlName="minPlayers" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="half">
        <mat-label>Máx. jugadores</mat-label>
        <input matInput type="number" formControlName="maxPlayers" />
      </mat-form-field>
    </div>

    <!-- Valor / créditos -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Valor (créditos)</mat-label>
      <input matInput type="number" formControlName="value" />
      <mat-error *ngIf="form.controls['value'].touched && form.controls['value'].invalid">
        Debe ser mayor que 0
      </mat-error>
    </mat-form-field>



    <!-- Descripción -->
    <mat-form-field appearance="outline" class="full">
      <mat-label>Descripción</mat-label>
      <textarea matInput rows="3" formControlName="description"></textarea>
    </mat-form-field>

  </form>
</div>

<div mat-dialog-actions align="center">
  <button mat-stroked-button color="warn" (click)="close()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="save()">Crear</button>
</div>